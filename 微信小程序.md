# 微信小程序

## 一、认识小程序

1. 什么是小程序？
2. 小程序种类有哪些？
   - 微信、支付宝、头条、百度、QQ、钉钉、抖音
3. 注册小程序账号
4. 去微信公众平台登录账号
5. 去 开发/开发设置 里面将自己的 AppID保存一下： 
   - wx498ac825301603df
6. 安装微信开发者工具
7. 启动微信开发者工具，然后微信扫码登录账号
8. 创建了一个小程序
9. 介绍微信开发者工具
   1. 工具栏
   2. 模拟器
   3. 编辑器
   4. 调试器
10. 上传
    - 小程序发布

## 二、小程序目录

1. pages    小程序页面
   - index    表示主页面
     - xxx.js     js逻辑
       - 定义数据
       - 生命周期钩子函数
       - 操作数据的方法
       - 。。。
     - xxx.json
       - 页面配置，用于控制小程序界面展示
     - xxx.wxml
       - 小程序模板文件，  类似  html文件，这里面写小程序的组件
     - xxx.wxss 
       - 小程序的样式文件，类似 css文件，这里面写小程序页面的样式，
       - 它的尺寸单位是  rpx  
   - logs      日志页面
2. utils       公共函数封装 
3. .gitignore    git上传忽略配置文件  
4. app.js   相当于项目入口文件
5. app.json   小程序全局配置
   1. app.json中的配置和页面配置基本一致
6. app.wxss   全局样式
7. project.config.json    工具配置
8. sitemap.json 小程序根目录下的 `sitemap.json` 文件用于配置小程序及其页面是否允许被微信索引 



## 三、小程序配置

###  1. 全局配置

1. pages  页面路径
2. entryPagePath    默认加载页面
3. window  窗口表现
4. tabBar 底部栏
5. netWorkTimeout   网络超时时间
6. subpackages   分包配置

### 2. 页面配置



## 四、小程序特点

## 1. 小程序大小

​	整个小程序最大16M

​	上传小程序要求是2M

​	比如： 我现在的小程序是15.8M ,上传要求2M,我们已经超了，这时候我们需要分割项目，这个操作称之为 “ 分包 ” ，每个包 <=2M 



## 五、小程序语法

> 两个函数
>
> ​	Page()   注册小程序页面
>
> ​	App()     注册小程序
>
> ​	getApp()    获得小程序实例  app
>
> ​	getCurrentPage()   获取页面实例

1. 文件
   - wxml    展示数据，书写事件
   - wxss   样式
   - js      逻辑
2. 语法
   - 数据展示  {{}}
   - 条件渲染 
     - 单路     wx:if = "{{表达式/数据}}"
     - 双路     wx:if="{{}}"  wx:else  
     - 多路     wx:if = "{{}}"  wx:elif="{{}}"  wx:else
   - 列表渲染
   - 事件
3. 小程序特殊语法
   1. wxml公共模板引入
      1. 公共模板
   2. wxs语法
      1. 可以让我们在wxml中插入一段js
   3. 自定义组件
      1. 构成部分
         - wxml    wxss   js   json 
         - 通过页面配置中的 usingComponents 来注册组件 
         - wxml中直接写自定义名称
4. getApp()
   - 获取小程序app实例 
5. getCurrentPage  
   - 获取当前页面栈



## 六、小程序组件

1. 小程序提供了内置组件
2. 官方文档给了案例 
3. 使用小程序组件，请注意它的属性，通过属性实现效果的 
4. webview   这个组件可以让我们在小程序中插入 h5 网页



## 七、小程序API

1. 作用
   - 我们通过使用APi进而使用微信的能力，访问手机权限的能力
   - 比如： 拍照、生物识别、二维码扫码等等功能
2. 数据请求
   - 我们需要登录微信小程序进行request合法域名配置，这里要求必须是https协议
     - 开发/开发管理/开发设置 
   - 调用 wx.request 来进行数据请求
     - wx.request 使用方式和  jq  $.ajax  类似
   - 我们需要在Page({}) 中定义data来保存数据请求的结果 
   - 在小程序中，数据的修改必须通过    setData 来修改，这一点和React类似



## 八、setData

1. 调用方式  

   ```js
   this.setData({
       定义的数据：值
   })
   ```

2. this可能会丢失，切记！！！

   ```js
   //只要你进行this.setData
   const _this = this 
   _this.setData({})
   ```



## 九、 小程序生命周期

1. 类型
   - 小程序全局生命周期
   - 小程序页面生命周期
2. 小程序全局生命周期
   - onLanunch      表示小程序启动    【使用量最高】
     - 获取系统信息
     - 获取用户信息
   - onUnlaunch    表示小程序关闭了
   - onPageNotfound   表示小程序页面为找到
   - onShow   表示小程序正在前台展示
   - onHide    表示小程序切换到了后台
3. 小程序页面生命周期
   - onLoad    表示小程序页面加载      类似 vue  created   ||  React  componentWillMount 
   - 【onReady】 表示小程序页面加载结束   类似vue  mounted || React  componentDidMount  
     - 一般onReady进行页面初次渲染进行列表渲染
   - onShow  表示小程序页面正在前台展示
   - onHide 表示小程序页面切换到了后台
   - onUnload 表示小程序页面关闭了
   - onRouteEnd  表示页面路径切换结束 
   - 【onPullDownRefresh】   表示小程序下拉刷新
     - 下拉刷新表示我们再次进行数据请求，重新加载页面
     - wx.request 
   - onReachBottom  上拉加载
     - 表示我们再次进行数据请求，重新加载页面
     - wx.request 
   - onShareAppMessage    分享

## 十、注意点

1. 小程序es语法支持度
   - 原生小程序能使用es7以及以上吗？
     - async函数



## 十一、小程序框架

1. mpvue
   -  基于vue语法来进行小程序开发
2. taro   ---    主流  
   - 既可以使用vue语法来开发
   - 也可以使用React语法来开发

